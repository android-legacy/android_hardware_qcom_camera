From ce625bd4b6860b826b199008ca684a055c41dc1f Mon Sep 17 00:00:00 2001
From: Chandan Gera <cgera@codeaurora.org>
Date: Thu, 9 Jan 2014 18:07:54 +0530
Subject: [PATCH 085/176] Camera: Avoid using memcpy in case of Raw Snapshot.

Avoid using memcpy in case of raw snapshot.

Change-Id: Id7681db62dabb2c53ea52ade52cab581ba06b450
---
 QCamera2/HAL/QCameraPostProc.cpp | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/QCamera2/HAL/QCameraPostProc.cpp b/QCamera2/HAL/QCameraPostProc.cpp
index a5e0740..ac5e938 100644
--- a/QCamera2/HAL/QCameraPostProc.cpp
+++ b/QCamera2/HAL/QCameraPostProc.cpp
@@ -1589,7 +1589,7 @@ int32_t QCameraPostProcessor::processRawImageImpl(mm_camera_super_buf_t *recvd_f
         if (zslChannelUsed) {
             raw_mem = rawMemObj->getMemory(frame->buf_idx, false);
         } else {
-            raw_mem = m_parent->mGetMemory(-1,
+            raw_mem = m_parent->mGetMemory(frame->fd,
                                            frame->frame_len,
                                            1,
                                            m_parent->mCallbackCookie);
@@ -1597,7 +1597,6 @@ int32_t QCameraPostProcessor::processRawImageImpl(mm_camera_super_buf_t *recvd_f
                 ALOGE("%s : Not enough memory for RAW cb ", __func__);
                 return NO_MEMORY;
             }
-            memcpy(raw_mem->data, frame->buffer, frame->frame_len);
         }
     }
 
-- 
1.8.3.1

